@using personal_blog.core.Models

<MudGrid Justify="Justify.Center">
    @if (Posts == null || !Posts.Any())
    {
        <MudAlert Severity="Severity.Warning" Class="ma-15" Variant="Variant.Outlined" >
            No related posts found.
        </MudAlert>
    }
    else
    {
        @foreach (var post in Posts)
        {
            <MudItem xs="12" sm="6" md="4">
                <MudLink Href="/posts/" Typo="Typo.inherit" Color="Color.Inherit" Underline="Underline.None">
                    <MudPaper Class="pa-4 ma-2 mud-theme-primary rounded-lg">
                        <MudText Align="Align.Center" Typo="Typo.h6" Class="pa-5">@post.Title</MudText>
                        <MudText Align="Align.Center" Typo="Typo.body1" Class="pa-5">
                            @GetSummary(post.Body)
                        </MudText>
                    </MudPaper>
                </MudLink>
            </MudItem>
        }   
    }
</MudGrid>

@code
{
    [Parameter]
    public List<Post>? Posts { get; set; }

    private string GetSummary(string body, int maxLength = 200)
    {
        if (string.IsNullOrEmpty(body) || body.Length <= maxLength)
        {
            return body;
        }

        return body.Substring(0, maxLength) + "...";
    }
}